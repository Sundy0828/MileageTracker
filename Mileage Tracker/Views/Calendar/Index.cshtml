
@{
    ViewBag.Title = "Calendar";
}

<h2>Calendar</h2>

<h3>Select Runner</h3>
@Html.DropDownList("user", new SelectList(ViewBag.users, "ID", "DisplayName", ViewBag.user), new { @class = "form-control", name = "user" })

<br />

<div id='calendar'></div>


@section scripts{
    <script>
        var userID = document.getElementById("user").value;;

        $(function () {
            // page is now ready, initialize the calendar...
            $('#calendar').fullCalendar({
                header:
                {
                    left: 'prev,next today',
                    center: 'title',
                    right: 'month,agendaWeek,agendaDay'
                },
                buttonText: {
                    today: 'today',
                    month: 'month',
                    week: 'week',
                    day: 'day'
                },
                events: "/Calendar/GetEvents",
                dayClick: function () {
                    alert('a day has been clicked!');
                },
                eventRender: function (event, element, view) {
                    return event.userId == userID;
                },
            });
        });

        $("#user").change(function () {
            userID = document.getElementById("user").value;
            $('#calendar').fullCalendar('rerenderEvents');
        });
    </script>
}

